<?xml version="1.0" encoding="utf-8"?>
<Project>
  <!--
    ***********************************************************************************************
    ***********************************************************************************************
                                            MainAppx Section
    ***********************************************************************************************
    ***********************************************************************************************
    -->

  <Target Name="_GenerateExtensionProjectProperties">
    <PropertyGroup>
      <AppxExtensionDirectory>$([System.IO.Path]::Combine($(SolutionRoot), src, extensions))</AppxExtensionDirectory>
    </PropertyGroup>
    <ItemGroup>
      <AppxExtensionProjects Include="$([System.IO.Directory]::GetFiles($(AppxExtensionDirectory), *.csproj, SearchOption.AllDirectories))" />
    </ItemGroup>
  </Target>

  <!--
    Defining the "ProjectReference" item for the main appx project to copy them (output files) in build time.
  -->
  <Target Name="_AppendExtensionProjectReferences" DependsOnTargets="_GenerateExtensionProjectProperties">
    <ItemGroup>
      <ProjectReference Include="@(AppxExtensionProjects)" />
    </ItemGroup>
  </Target>
</Project>
